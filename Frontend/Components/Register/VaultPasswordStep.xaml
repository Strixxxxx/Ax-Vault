<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Frontend.Components.Register.VaultPasswordStep">
    
    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="0,0,0,20">
            <Label 
                Text="Create your Vault Password"
                FontSize="18"
                TextColor="White"
                Margin="0,10,0,5"/>
                
            <Label
                Text="This key is used to encrypt your entire vault. It is NEVER stored on our servers. If you lose it, your data cannot be recovered."
                FontSize="14"
                TextColor="#ffcc00"
                FontAttributes="Bold" />
                
            <!-- Vault Password Entry with Toggle -->
            <Grid ColumnDefinitions="*" Margin="0,10,0,0">
                <Entry 
                    x:Name="VaultPasswordEntry"
                    Placeholder="Vault Password"
                    PlaceholderColor="#7f7f7f"
                    BackgroundColor="#2a2a2a"
                    TextColor="White"
                    IsPassword="true"
                    TextChanged="OnVaultPasswordChanged"/>
                
                <Button 
                    x:Name="VaultPasswordToggle"
                    BackgroundColor="Transparent"
                    BorderColor="Transparent"
                    HorizontalOptions="End"
                    VerticalOptions="Center"
                    Margin="0,0,5,0"
                    Padding="0"
                    WidthRequest="48"
                    HeightRequest="48"
                    Clicked="OnVaultPasswordToggleClicked">
                    <Button.ImageSource>
                        <FontImageSource
                            FontFamily="MaterialIcons"
                            Glyph="&#xe8f4;"
                            Color="#7f7f7f"
                            Size="24" />
                    </Button.ImageSource>
                </Button>
            </Grid>
            
            <!-- Confirm Vault Password Entry with Toggle -->
            <Grid ColumnDefinitions="*" Margin="0,5,0,0">
                <Entry 
                    x:Name="ConfirmVaultPasswordEntry"
                    Placeholder="Confirm Vault Password"
                    PlaceholderColor="#7f7f7f"
                    BackgroundColor="#2a2a2a"
                    TextColor="White"
                    IsPassword="true"
                    TextChanged="OnConfirmVaultPasswordChanged"/>
                
                <Button 
                    x:Name="ConfirmToggle"
                    BackgroundColor="Transparent"
                    BorderColor="Transparent"
                    HorizontalOptions="End"
                    VerticalOptions="Center"
                    Margin="0,0,5,0"
                    Padding="0"
                    WidthRequest="48"
                    HeightRequest="48"
                    Clicked="OnConfirmToggleClicked">
                    <Button.ImageSource>
                        <FontImageSource
                            FontFamily="MaterialIcons"
                            Glyph="&#xe8f4;"
                            Color="#7f7f7f"
                            Size="24" />
                    </Button.ImageSource>
                </Button>
            </Grid>
            
            <Label
                x:Name="ValidationMessage"
                TextColor="#ff5555"
                FontSize="12"
                IsVisible="False" />
                
            <!-- Vault Key Requirements -->
            <Frame BackgroundColor="#1a1a1a" BorderColor="#333333" Padding="15" Margin="0,10,0,0">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Vault Password requirements:" TextColor="White" FontSize="14" Margin="0,0,0,5" />
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="LengthIndicator" 
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="12-16 characters" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="UppercaseIndicator"
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="At least one uppercase letter" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="LowercaseIndicator"
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="At least one lowercase letter" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="DigitIndicator"
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="At least one number" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="SpecialCharIndicator"
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="At least one special character" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <BoxView x:Name="MatchIndicator"
                                WidthRequest="15" HeightRequest="15" 
                                BackgroundColor="#333333" 
                                CornerRadius="7.5"
                                VerticalOptions="Center" />
                        <Label Text="Passwords match" 
                            TextColor="LightGray" FontSize="13"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentView>
