<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Frontend.Components.Login.Login">
    
    <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" 
          Padding="20,10"
          RowSpacing="15"
          WidthRequest="320">

        <Image Grid.Row="0"
               Source="silverwolf.png"
               HeightRequest="80"
               Aspect="AspectFit"
               HorizontalOptions="Center"
               Margin="0,0,0,20">
            <Image.IsVisible>
                <OnIdiom x:TypeArguments="x:Boolean">
                    <OnIdiom.Phone>True</OnIdiom.Phone>
                    <OnIdiom.Tablet>True</OnIdiom.Tablet>
                    <OnIdiom.Desktop>False</OnIdiom.Desktop>
                </OnIdiom>
            </Image.IsVisible>
        </Image>
        
        <Label Grid.Row="1"
               Text="Welcome Back"
               FontSize="28"
               FontAttributes="Bold"
               TextColor="White"
               HorizontalOptions="Center"
               Margin="0,0,0,20"/>
        
        <Entry Grid.Row="2"
               x:Name="UsernameEntry"
               Placeholder="Username or Email"
               PlaceholderColor="#7f7f7f"
               BackgroundColor="#2a2a2a"
               TextColor="White"
               Margin="0,5,0,0"/>
        
        <!-- Password entry with visibility toggle -->
        <Grid Grid.Row="3" Margin="0,5,0,0">
            <Entry x:Name="PasswordEntry"
                   Placeholder="Password"
                   PlaceholderColor="#7f7f7f"
                   BackgroundColor="#2a2a2a"
                   TextColor="White"
                   IsPassword="true"/>
            
        <Label x:Name="TogglePasswordLabel"
            Text="&#xe8f4;"
            TextColor="White"
            FontSize="24"
            HorizontalOptions="End"
            VerticalOptions="Center"
            Margin="0,0,15,0">
            <Label.FontFamily>
                <OnPlatform x:TypeArguments="x:String">
                    <On Platform="Android" Value="MaterialIcons-Regular.ttf#MaterialIcons" />
                    <On Platform="iOS" Value="MaterialIcons" />
                    <On Platform="WinUI" Value="MaterialIcons" />
                </OnPlatform>
            </Label.FontFamily>
            <Label.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnTogglePasswordVisibility"/>
            </Label.GestureRecognizers>
        </Label>
        </Grid>
        
        <HorizontalStackLayout Grid.Row="4" Margin="0,10,0,0">
            <CheckBox x:Name="StayLoggedInCheckbox" Color="#00e5ff" IsChecked="False"/>
            <Label Text="Stay Logged In" 
                   TextColor="LightGray" 
                   VerticalOptions="Center"
                   FontSize="14">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnStayLoggedInTapped"/>
                </Label.GestureRecognizers>
            </Label>
        </HorizontalStackLayout>

        <Button Grid.Row="5"
                x:Name="LoginButton"
                Text="Sign In"
                Clicked="OnLoginClicked"
                Margin="0,15,0,0"
                BackgroundColor="#00e5ff"
                TextColor="Black"
                HeightRequest="46"
                CornerRadius="4"/>
        
        <Label Grid.Row="6"
               Text="Forgot password?"
               TextColor="Gray"
               HorizontalOptions="Center"
               Margin="0,10,0,0" />

        <Label Grid.Row="7"
               x:Name="StatusLabel"
               HorizontalOptions="Center"
               TextColor="Red"
               IsVisible="False"
               Margin="0,10,0,0"/>
        
        <Label Grid.Row="8"
               Margin="0,20,0,0"
               HorizontalOptions="Center">
            <Label.FormattedText>
                <FormattedString>
                    <Span Text="Don't have an account? " TextColor="Gray" />
                    <Span Text="Register" TextColor="#00e5ff" TextDecorations="Underline">
                        <Span.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnRegisterTapped" />
                        </Span.GestureRecognizers>
                    </Span>
                </FormattedString>
            </Label.FormattedText>
        </Label>
    </Grid>
</ContentView>